<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>AnGaPo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    font-family: Arial, sans-serif;
    background:#0f172a;
    color:#fff;
    margin:0;
    display:flex;
    flex-direction:column;
    min-height:100vh;
}

header{
    background:#020617;
    padding:16px;
    text-align:center;
    font-size:22px;
    font-weight:bold;
    letter-spacing:1px;
    box-shadow:0 4px 12px rgba(0,0,0,.6);
}

.container{
    padding:25px;
    flex:1;
}

#menu{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:25px;
    margin-top:20px;
}

/* ===== LIBRO ===== */
.card{
    perspective:1000px;
    text-decoration:none;
}

.book{
    position:relative;
    width:100%;
    aspect-ratio: 2 / 3;
    transform-style:preserve-3d;
    transition:transform .4s ease;
}

.book:hover{
    transform:rotateY(-8deg) scale(1.05);
}

.book img{
    width:100%;
    height:auto;
    display:block;
    border-radius:6px;
    box-shadow:
        -8px 0 15px rgba(0,0,0,.7),
        0 15px 25px rgba(0,0,0,.6);
}

/* Lomo */
.book::before{
    content:"";
    position:absolute;
    left:-6px;
    top:0;
    width:6px;
    height:100%;
    background:linear-gradient(to right,#111,#333);
    border-radius:4px 0 0 4px;
}

/* T√≠tulo debajo */
.card-title{
    margin-top:10px;
    font-size:14px;
    text-align:center;
    font-weight:bold;
    color:#e2e8f0;
}

/* Footer */
footer{
    background:#020617;
    text-align:center;
    font-size:12px;
    padding:15px;
    border-top:1px solid #1e293b;
}

/* Usuario */
.usuario-box{
    text-align:center;
    margin-top:10px;
}

.usuario-box button{
    margin-top:5px;
    padding:6px 12px;
    background:#2563eb;
    border:none;
    border-radius:5px;
    color:white;
    cursor:pointer;
}
</style>
</head>

<body>

<!-- üîê VALIDAR SESI√ìN -->
<script>
if(!localStorage.getItem("usuarioActivo")){
    window.location.href = "login.html";
}
</script>

<header>Ascenso Inseguro V.2026.2.25</header>

<!-- üë§ USUARIO ACTIVO -->
<div class="usuario-box">
    <h3>Bienvenido: <span id="usuario"></span></h3>
    <button onclick="cerrarSesion()">Cerrar Sesi√≥n</button>
    <button onclick="toggleEstadisticas()">Ver Estad√≠sticas</button>
<button onclick="limpiarHistorial()" style="background:#dc2626;">üóë Limpiar Historial</button>
    
<div id="estadisticas" style="margin-top:10px;"></div>
</div>

<div class="container">

<div id="menu">

<a href="examen1.html" class="card">
    <div class="book">
        <img src="portadas/1cjm.jpg" onerror="this.src='portadas/default.jpg'">
    </div>
    <div class="card-title">01 - C√≥digo de Justicia Militar</div>
</a>

<a href="examen2.html" class="card">
    <div class="book">
        <img src="portadas/2lfafe.jpg" onerror="this.src='portadas/default.jpg'">
    </div>
    <div class="card-title">02 - Ley Federal de Armas de Fuego y Explosivos</div>
</a>

<a href="examen3.html" class="card">
    <div class="book">
        <img src="portadas/3loefam.jpg" onerror="this.src='portadas/default.jpg'">
    </div>
    <div class="card-title">03 - Ley Org√°nica del Ej√©rcito y F.A.M.</div>
</a>

<a href="examen4.html" class="card">
    <div class="book">
        <img src="portadas/4lissfam.jpg" onerror="this.src='portadas/default.jpg'">
    </div>
    <div class="card-title">04 - Ley del ISSFAM</div>
</a>

<a href="examen5.html" class="card">
    <div class="book">
        <img src="portadas/5ldefamygn.jpg" onerror="this.src='portadas/default.jpg'">
    </div>
    <div class="card-title">05 - Ley de Disciplina del Ejto., F.A.M. y G.N.</div>
</a>

<a href="examen6.html" class="card">
    <div class="book">
        <img src="portadas/default.jpg" onerror="this.src='portadas/default.jpg'">
    </div>
    <div class="card-title">06 - Ley de Ascensos y Recompensas del Ejto., F.A.M. y G.N.</div>
</a>

</div>
</div>

<footer>
Creado por el C. Sgto. 1/o. Inftca. √Ångel Garc√≠a Posadas<br>
¬© 2026 AnGaPo
</footer>

<!-- üîß SCRIPT FINAL -->

  <script>
document.getElementById("usuario").innerText = localStorage.getItem("usuarioActivo");

function cerrarSesion(){
    localStorage.removeItem("usuarioActivo");
    window.location.href = "login.html";
}

function verEstadisticas(){

    let usuario = localStorage.getItem("usuarioActivo");
    let historial = JSON.parse(localStorage.getItem("estadisticas")) || {};

    if(historial[usuario] && historial[usuario].length > 0){

        let html = "<h3>Historial:</h3>";

        historial[usuario].forEach(e=>{

            // Registros antiguos
            if(e.resultado){
                html += "<p>"+e.fecha+" ‚Üí "+e.resultado+"</p>";
            }

            // Registros nuevos
            else{
                html += `
                <div style="margin-bottom:12px; padding:10px; background:#1e293b; border-radius:10px;">
                    <b>${e.examen}</b><br>
                    ${e.fecha}<br>
                    ${e.puntaje}/${e.total} (${e.porcentaje}%)
                </div>
                `;
            }

        });

        document.getElementById("estadisticas").innerHTML = html;

    }else{
        document.getElementById("estadisticas").innerHTML = "Sin registros a√∫n.";
    }
}
function toggleEstadisticas(){

    let div = document.getElementById("estadisticas");

    if(div.innerHTML.trim() !== ""){
        div.innerHTML = "";
    }else{
        verEstadisticas();
    }
}

function limpiarHistorial(){

    let usuario = localStorage.getItem("usuarioActivo");
    let historial = JSON.parse(localStorage.getItem("estadisticas")) || {};

    if(confirm("¬øSeguro que deseas borrar todo el historial?")){

        if(historial[usuario]){
            historial[usuario] = [];
            localStorage.setItem("estadisticas", JSON.stringify(historial));
        }

        document.getElementById("estadisticas").innerHTML = "Historial eliminado.";
    }
}
</script>
    
</script>
</body>
</html>